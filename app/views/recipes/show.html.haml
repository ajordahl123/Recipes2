#main.container
%h1.header= @recipe.recipe_name
-if @user == @recipe.user
  -creator = "You, #{@user.email}"
-else
  -creator = @user.email
.created_by= "Created By: #{creator}"

-# user can edit and delete if it's their own recipe
-if @user == @recipe.user
  = link_to "Edit recipe", edit_recipe_path(@recipe)
  = link_to "Delete recipe", recipe_path(@recipe), :method => :delete
  %br
-# user can review if they're logged in and it's not their own recipe
-if ! @user.nil? && @user != @recipe.user
  = link_to "Write a review", new_recipe_review_path(@recipe)
  %br

= link_to "Back to recipe listing", recipes_path

%br
%br

.level= "Level of Difficulty: #{@recipe.level}"
.cuisine= "Type of Cuisine: #{@recipe.cuisine}"
.time_to_create= "Time to Create: #{@recipe.time_to_create} minute(s)"
-if @recipe.image.attached?
  =image_tag(@recipe.image.variant(resize: "200x200^"))

%br
-restrictions = ""
-if @recipe.vegan
  -restrictions += "|| Vegan |"
-if @recipe.vegetarian
  -restrictions += "| Vegetarian |"
-if @recipe.nut_free
  -restrictions += "| Nut Free |"
-if @recipe.dairy_free
  -restrictions += "| Dairy Free ||"
-if ! restrictions.eql? ""
  =restrictions

-if ! @recipe.appliance.eql? ""
  .appliance= "Special Appliance(s) Needed: #{@recipe.appliance}"

%br
.ingredients_header= "Ingredients Needed:"
.ingredients= @recipe.ingredients
%br
.instructions_header= "How to Make This Recipe:"
.instructions= @recipe.instructions

%br
%table.table
  %thead
    %tr
      %th Rating
      %th Review
  %tbody
    -@recipe.reviews.each do |r|
      %tr
        %td= r.stars
        %td= r.text
